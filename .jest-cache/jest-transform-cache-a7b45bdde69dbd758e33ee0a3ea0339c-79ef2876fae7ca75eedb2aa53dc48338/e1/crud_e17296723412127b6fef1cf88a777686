2b8831f05346736573ea4f26fdcb0853
const {
  wpClient,
  getWcAuthHeader,
  getLdAuthHeader
} = require('./http');

/**
 * Determines the Auth header based on the namespace.
 * - 'wc/v3': WooCommerce (Consumer Key/Secret)
 * - 'ldlms/v2': LearnDash (App Password)
 * - 'wp/v2': WP Core (App Password - reusing LD creds as they are likely Admin)
 */
const getAuthHeader = namespace => {
  if (namespace.startsWith('wc/')) {
    return getWcAuthHeader();
  }
  return getLdAuthHeader();
};
const list = async (namespace, resource, params = {}) => {
  const response = await wpClient.get(`/${namespace}/${resource}`, {
    params,
    headers: {
      Authorization: getAuthHeader(namespace)
    }
  });
  return response.data;
};
const get = async (namespace, resource, id, params = {}) => {
  const response = await wpClient.get(`/${namespace}/${resource}/${id}`, {
    params,
    headers: {
      Authorization: getAuthHeader(namespace)
    }
  });
  return response.data;
};
const create = async (namespace, resource, data) => {
  const response = await wpClient.post(`/${namespace}/${resource}`, data, {
    headers: {
      Authorization: getAuthHeader(namespace)
    }
  });
  return response.data;
};
const update = async (namespace, resource, id, data) => {
  const response = await wpClient.put(`/${namespace}/${resource}/${id}`, data, {
    headers: {
      Authorization: getAuthHeader(namespace)
    }
  });
  return response.data;
};
const patch = async (namespace, resource, id, data) => {
  const response = await wpClient.post(`/${namespace}/${resource}/${id}`, data, {
    // Axios/WP often treat patch as POST with specific headers or just PATCH method
    // Using PATCH method directly is better if client supports it
    method: 'PATCH',
    headers: {
      Authorization: getAuthHeader(namespace)
    }
  });
  return response.data;
};

// WP specific: Delete often requires ?force=true to actually delete, otherwise trashes.
const remove = async (namespace, resource, id, params = {}) => {
  const response = await wpClient.delete(`/${namespace}/${resource}/${id}`, {
    params,
    headers: {
      Authorization: getAuthHeader(namespace)
    }
  });
  return response.data;
};
module.exports = {
  list,
  get,
  create,
  update,
  patch,
  remove
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJ3cENsaWVudCIsImdldFdjQXV0aEhlYWRlciIsImdldExkQXV0aEhlYWRlciIsInJlcXVpcmUiLCJnZXRBdXRoSGVhZGVyIiwibmFtZXNwYWNlIiwic3RhcnRzV2l0aCIsImxpc3QiLCJyZXNvdXJjZSIsInBhcmFtcyIsInJlc3BvbnNlIiwiZ2V0IiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJkYXRhIiwiaWQiLCJjcmVhdGUiLCJwb3N0IiwidXBkYXRlIiwicHV0IiwicGF0Y2giLCJtZXRob2QiLCJyZW1vdmUiLCJkZWxldGUiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsiY3J1ZC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IHdwQ2xpZW50LCBnZXRXY0F1dGhIZWFkZXIsIGdldExkQXV0aEhlYWRlciB9ID0gcmVxdWlyZSgnLi9odHRwJyk7XG5cbi8qKlxuICogRGV0ZXJtaW5lcyB0aGUgQXV0aCBoZWFkZXIgYmFzZWQgb24gdGhlIG5hbWVzcGFjZS5cbiAqIC0gJ3djL3YzJzogV29vQ29tbWVyY2UgKENvbnN1bWVyIEtleS9TZWNyZXQpXG4gKiAtICdsZGxtcy92Mic6IExlYXJuRGFzaCAoQXBwIFBhc3N3b3JkKVxuICogLSAnd3AvdjInOiBXUCBDb3JlIChBcHAgUGFzc3dvcmQgLSByZXVzaW5nIExEIGNyZWRzIGFzIHRoZXkgYXJlIGxpa2VseSBBZG1pbilcbiAqL1xuY29uc3QgZ2V0QXV0aEhlYWRlciA9IChuYW1lc3BhY2UpID0+IHtcbiAgICBpZiAobmFtZXNwYWNlLnN0YXJ0c1dpdGgoJ3djLycpKSB7XG4gICAgICAgIHJldHVybiBnZXRXY0F1dGhIZWFkZXIoKTtcbiAgICB9XG4gICAgcmV0dXJuIGdldExkQXV0aEhlYWRlcigpO1xufTtcblxuY29uc3QgbGlzdCA9IGFzeW5jIChuYW1lc3BhY2UsIHJlc291cmNlLCBwYXJhbXMgPSB7fSkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd3BDbGllbnQuZ2V0KGAvJHtuYW1lc3BhY2V9LyR7cmVzb3VyY2V9YCwge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogZ2V0QXV0aEhlYWRlcihuYW1lc3BhY2UpIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbn07XG5cbmNvbnN0IGdldCA9IGFzeW5jIChuYW1lc3BhY2UsIHJlc291cmNlLCBpZCwgcGFyYW1zID0ge30pID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdwQ2xpZW50LmdldChgLyR7bmFtZXNwYWNlfS8ke3Jlc291cmNlfS8ke2lkfWAsIHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGdldEF1dGhIZWFkZXIobmFtZXNwYWNlKSB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG59O1xuXG5jb25zdCBjcmVhdGUgPSBhc3luYyAobmFtZXNwYWNlLCByZXNvdXJjZSwgZGF0YSkgPT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgd3BDbGllbnQucG9zdChgLyR7bmFtZXNwYWNlfS8ke3Jlc291cmNlfWAsIGRhdGEsIHtcbiAgICAgICAgaGVhZGVyczogeyBBdXRob3JpemF0aW9uOiBnZXRBdXRoSGVhZGVyKG5hbWVzcGFjZSkgfVxuICAgIH0pO1xuICAgIHJldHVybiByZXNwb25zZS5kYXRhO1xufTtcblxuY29uc3QgdXBkYXRlID0gYXN5bmMgKG5hbWVzcGFjZSwgcmVzb3VyY2UsIGlkLCBkYXRhKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB3cENsaWVudC5wdXQoYC8ke25hbWVzcGFjZX0vJHtyZXNvdXJjZX0vJHtpZH1gLCBkYXRhLCB7XG4gICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogZ2V0QXV0aEhlYWRlcihuYW1lc3BhY2UpIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbn07XG5cbmNvbnN0IHBhdGNoID0gYXN5bmMgKG5hbWVzcGFjZSwgcmVzb3VyY2UsIGlkLCBkYXRhKSA9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB3cENsaWVudC5wb3N0KGAvJHtuYW1lc3BhY2V9LyR7cmVzb3VyY2V9LyR7aWR9YCwgZGF0YSwgeyAvLyBBeGlvcy9XUCBvZnRlbiB0cmVhdCBwYXRjaCBhcyBQT1NUIHdpdGggc3BlY2lmaWMgaGVhZGVycyBvciBqdXN0IFBBVENIIG1ldGhvZFxuICAgICAgICAvLyBVc2luZyBQQVRDSCBtZXRob2QgZGlyZWN0bHkgaXMgYmV0dGVyIGlmIGNsaWVudCBzdXBwb3J0cyBpdFxuICAgICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICAgIGhlYWRlcnM6IHsgQXV0aG9yaXphdGlvbjogZ2V0QXV0aEhlYWRlcihuYW1lc3BhY2UpIH1cbiAgICB9KTtcbiAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTtcbn07XG5cbi8vIFdQIHNwZWNpZmljOiBEZWxldGUgb2Z0ZW4gcmVxdWlyZXMgP2ZvcmNlPXRydWUgdG8gYWN0dWFsbHkgZGVsZXRlLCBvdGhlcndpc2UgdHJhc2hlcy5cbmNvbnN0IHJlbW92ZSA9IGFzeW5jIChuYW1lc3BhY2UsIHJlc291cmNlLCBpZCwgcGFyYW1zID0ge30pID0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHdwQ2xpZW50LmRlbGV0ZShgLyR7bmFtZXNwYWNlfS8ke3Jlc291cmNlfS8ke2lkfWAsIHtcbiAgICAgICAgcGFyYW1zLFxuICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGdldEF1dGhIZWFkZXIobmFtZXNwYWNlKSB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHJlc3BvbnNlLmRhdGE7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgICBsaXN0LFxuICAgIGdldCxcbiAgICBjcmVhdGUsXG4gICAgdXBkYXRlLFxuICAgIHBhdGNoLFxuICAgIHJlbW92ZVxufTtcbiJdLCJtYXBwaW5ncyI6IkFB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