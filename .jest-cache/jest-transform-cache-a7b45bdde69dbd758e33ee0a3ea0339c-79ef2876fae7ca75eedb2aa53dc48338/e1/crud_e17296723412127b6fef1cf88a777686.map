{"version":3,"names":["wpClient","getWcAuthHeader","getLdAuthHeader","require","getAuthHeader","namespace","startsWith","list","resource","params","response","get","headers","Authorization","data","id","create","post","update","put","patch","method","remove","delete","module","exports"],"sources":["crud.js"],"sourcesContent":["const { wpClient, getWcAuthHeader, getLdAuthHeader } = require('./http');\n\n/**\n * Determines the Auth header based on the namespace.\n * - 'wc/v3': WooCommerce (Consumer Key/Secret)\n * - 'ldlms/v2': LearnDash (App Password)\n * - 'wp/v2': WP Core (App Password - reusing LD creds as they are likely Admin)\n */\nconst getAuthHeader = (namespace) => {\n    if (namespace.startsWith('wc/')) {\n        return getWcAuthHeader();\n    }\n    return getLdAuthHeader();\n};\n\nconst list = async (namespace, resource, params = {}) => {\n    const response = await wpClient.get(`/${namespace}/${resource}`, {\n        params,\n        headers: { Authorization: getAuthHeader(namespace) }\n    });\n    return response.data;\n};\n\nconst get = async (namespace, resource, id, params = {}) => {\n    const response = await wpClient.get(`/${namespace}/${resource}/${id}`, {\n        params,\n        headers: { Authorization: getAuthHeader(namespace) }\n    });\n    return response.data;\n};\n\nconst create = async (namespace, resource, data) => {\n    const response = await wpClient.post(`/${namespace}/${resource}`, data, {\n        headers: { Authorization: getAuthHeader(namespace) }\n    });\n    return response.data;\n};\n\nconst update = async (namespace, resource, id, data) => {\n    const response = await wpClient.put(`/${namespace}/${resource}/${id}`, data, {\n        headers: { Authorization: getAuthHeader(namespace) }\n    });\n    return response.data;\n};\n\nconst patch = async (namespace, resource, id, data) => {\n    const response = await wpClient.post(`/${namespace}/${resource}/${id}`, data, { // Axios/WP often treat patch as POST with specific headers or just PATCH method\n        // Using PATCH method directly is better if client supports it\n        method: 'PATCH',\n        headers: { Authorization: getAuthHeader(namespace) }\n    });\n    return response.data;\n};\n\n// WP specific: Delete often requires ?force=true to actually delete, otherwise trashes.\nconst remove = async (namespace, resource, id, params = {}) => {\n    const response = await wpClient.delete(`/${namespace}/${resource}/${id}`, {\n        params,\n        headers: { Authorization: getAuthHeader(namespace) }\n    });\n    return response.data;\n};\n\nmodule.exports = {\n    list,\n    get,\n    create,\n    update,\n    patch,\n    remove\n};\n"],"mappings":"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","ignoreList":[]}