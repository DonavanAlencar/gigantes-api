754b662f14ace793bd4059287796eda1
const cache = require('./cache');
const {
  wpClient,
  getLdAuthHeader
} = require('./http');
const CACHE_TTL = 300; // 5 minutes

const getUserDashboard = async id => {
  const cacheKey = `sistemagigantes:bff:user:${id}:dashboard`;
  const redis = cache.getClient();
  const cached = await redis.get(cacheKey);
  if (cached) {
    return JSON.parse(cached);
  }
  try {
    // Fetch Basic User Data
    // WP API: /wp/v2/users/<id>
    const userRes = await wpClient.get(`/wp/v2/users/${id}`, {
      headers: {
        Authorization: getLdAuthHeader() // Using LD admin creds to see user data
      }
    });
    const user = userRes.data;
    const dashboard = {
      id: user.id,
      name: user.name,
      avatar_url: user.avatar_urls && user.avatar_urls['96'],
      courses: [],
      warnings: []
    };

    // Circuit Breaker for LearnDash
    // Fetch Enrolled Courses
    // LD API: /ldlms/v2/users-courses?user=<id>
    try {
      const coursesRes = await wpClient.get(`/ldlms/v2/users-courses?user=${id}`, {
        timeout: 3000,
        // Strict timeout for circuit breaker simulation
        headers: {
          Authorization: getLdAuthHeader()
        }
      });

      // Map courses
      // The endpoint returns list of course IDs or objects depending on query
      // Usually returns generic post objects.

      // Note: The LD API might respond with "headers" or specific structure.
      // Assuming array of objects.
      const coursesData = Array.isArray(coursesRes.data) ? coursesRes.data : [];

      // Get Progress for each course
      // LD API: /ldlms/v2/users-course-progress_v2?user=<id>&course=<course_id>
      // This is heavy. Let's limit concurrency or check if we can get all at once.
      // Documentation implies one by one.

      const coursesWithProgress = await Promise.all(coursesData.map(async course => {
        try {
          const progressRes = await wpClient.get(`/ldlms/v2/users-course-progress_v2?user=${id}&course=${course.id}`, {
            timeout: 2000,
            // Short timeout
            headers: {
              Authorization: getLdAuthHeader()
            }
          });

          // Helper to calculate percentage.
          // Structure depends on LD version. Often has 'steps_completed', 'steps_total'.
          const pData = progressRes.data;
          let progressPercent = 0;
          // Heuristic for progress
          if (pData.course_progress && pData.course_progress.total_steps > 0) {
            progressPercent = pData.course_progress.completed_steps / pData.course_progress.total_steps * 100;
          }
          return {
            id: course.id,
            title: course.title && course.title.rendered,
            progress: Math.round(progressPercent)
          };
        } catch (err) {
          return {
            id: course.id,
            title: course.title && course.title.rendered,
            progress: null,
            error: 'Progress unavailable'
          };
        }
      }));
      dashboard.courses = coursesWithProgress;
    } catch (error) {
      console.error('LearnDash Circuit Breaker:', error.message);
      dashboard.warnings.push('Cursos indispon√≠veis temporariamente');
      // We still return user data
    }

    // Cache the result
    await redis.set(cacheKey, JSON.stringify(dashboard), 'EX', CACHE_TTL);
    return dashboard;
  } catch (error) {
    if (error.response && error.response.status === 404) {
      throw new Error('User not found');
    }
    throw error;
  }
};
module.exports = {
  getUserDashboard
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjYWNoZSIsInJlcXVpcmUiLCJ3cENsaWVudCIsImdldExkQXV0aEhlYWRlciIsIkNBQ0hFX1RUTCIsImdldFVzZXJEYXNoYm9hcmQiLCJpZCIsImNhY2hlS2V5IiwicmVkaXMiLCJnZXRDbGllbnQiLCJjYWNoZWQiLCJnZXQiLCJKU09OIiwicGFyc2UiLCJ1c2VyUmVzIiwiaGVhZGVycyIsIkF1dGhvcml6YXRpb24iLCJ1c2VyIiwiZGF0YSIsImRhc2hib2FyZCIsIm5hbWUiLCJhdmF0YXJfdXJsIiwiYXZhdGFyX3VybHMiLCJjb3Vyc2VzIiwid2FybmluZ3MiLCJjb3Vyc2VzUmVzIiwidGltZW91dCIsImNvdXJzZXNEYXRhIiwiQXJyYXkiLCJpc0FycmF5IiwiY291cnNlc1dpdGhQcm9ncmVzcyIsIlByb21pc2UiLCJhbGwiLCJtYXAiLCJjb3Vyc2UiLCJwcm9ncmVzc1JlcyIsInBEYXRhIiwicHJvZ3Jlc3NQZXJjZW50IiwiY291cnNlX3Byb2dyZXNzIiwidG90YWxfc3RlcHMiLCJjb21wbGV0ZWRfc3RlcHMiLCJ0aXRsZSIsInJlbmRlcmVkIiwicHJvZ3Jlc3MiLCJNYXRoIiwicm91bmQiLCJlcnIiLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwicHVzaCIsInNldCIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwic3RhdHVzIiwiRXJyb3IiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZXMiOlsidXNlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBjYWNoZSA9IHJlcXVpcmUoJy4vY2FjaGUnKTtcbmNvbnN0IHsgd3BDbGllbnQsIGdldExkQXV0aEhlYWRlciB9ID0gcmVxdWlyZSgnLi9odHRwJyk7XG5cbmNvbnN0IENBQ0hFX1RUTCA9IDMwMDsgLy8gNSBtaW51dGVzXG5cbmNvbnN0IGdldFVzZXJEYXNoYm9hcmQgPSBhc3luYyAoaWQpID0+IHtcbiAgICBjb25zdCBjYWNoZUtleSA9IGBzaXN0ZW1hZ2lnYW50ZXM6YmZmOnVzZXI6JHtpZH06ZGFzaGJvYXJkYDtcbiAgICBjb25zdCByZWRpcyA9IGNhY2hlLmdldENsaWVudCgpO1xuXG4gICAgY29uc3QgY2FjaGVkID0gYXdhaXQgcmVkaXMuZ2V0KGNhY2hlS2V5KTtcbiAgICBpZiAoY2FjaGVkKSB7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGNhY2hlZCk7XG4gICAgfVxuXG4gICAgdHJ5IHtcbiAgICAgICAgLy8gRmV0Y2ggQmFzaWMgVXNlciBEYXRhXG4gICAgICAgIC8vIFdQIEFQSTogL3dwL3YyL3VzZXJzLzxpZD5cbiAgICAgICAgY29uc3QgdXNlclJlcyA9IGF3YWl0IHdwQ2xpZW50LmdldChgL3dwL3YyL3VzZXJzLyR7aWR9YCwge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgIEF1dGhvcml6YXRpb246IGdldExkQXV0aEhlYWRlcigpIC8vIFVzaW5nIExEIGFkbWluIGNyZWRzIHRvIHNlZSB1c2VyIGRhdGFcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSB1c2VyUmVzLmRhdGE7XG5cbiAgICAgICAgY29uc3QgZGFzaGJvYXJkID0ge1xuICAgICAgICAgICAgaWQ6IHVzZXIuaWQsXG4gICAgICAgICAgICBuYW1lOiB1c2VyLm5hbWUsXG4gICAgICAgICAgICBhdmF0YXJfdXJsOiB1c2VyLmF2YXRhcl91cmxzICYmIHVzZXIuYXZhdGFyX3VybHNbJzk2J10sXG4gICAgICAgICAgICBjb3Vyc2VzOiBbXSxcbiAgICAgICAgICAgIHdhcm5pbmdzOiBbXVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENpcmN1aXQgQnJlYWtlciBmb3IgTGVhcm5EYXNoXG4gICAgICAgIC8vIEZldGNoIEVucm9sbGVkIENvdXJzZXNcbiAgICAgICAgLy8gTEQgQVBJOiAvbGRsbXMvdjIvdXNlcnMtY291cnNlcz91c2VyPTxpZD5cbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIGNvbnN0IGNvdXJzZXNSZXMgPSBhd2FpdCB3cENsaWVudC5nZXQoYC9sZGxtcy92Mi91c2Vycy1jb3Vyc2VzP3VzZXI9JHtpZH1gLCB7XG4gICAgICAgICAgICAgICAgdGltZW91dDogMzAwMCwgLy8gU3RyaWN0IHRpbWVvdXQgZm9yIGNpcmN1aXQgYnJlYWtlciBzaW11bGF0aW9uXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICAgICBBdXRob3JpemF0aW9uOiBnZXRMZEF1dGhIZWFkZXIoKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBNYXAgY291cnNlc1xuICAgICAgICAgICAgLy8gVGhlIGVuZHBvaW50IHJldHVybnMgbGlzdCBvZiBjb3Vyc2UgSURzIG9yIG9iamVjdHMgZGVwZW5kaW5nIG9uIHF1ZXJ5XG4gICAgICAgICAgICAvLyBVc3VhbGx5IHJldHVybnMgZ2VuZXJpYyBwb3N0IG9iamVjdHMuXG5cbiAgICAgICAgICAgIC8vIE5vdGU6IFRoZSBMRCBBUEkgbWlnaHQgcmVzcG9uZCB3aXRoIFwiaGVhZGVyc1wiIG9yIHNwZWNpZmljIHN0cnVjdHVyZS5cbiAgICAgICAgICAgIC8vIEFzc3VtaW5nIGFycmF5IG9mIG9iamVjdHMuXG4gICAgICAgICAgICBjb25zdCBjb3Vyc2VzRGF0YSA9IEFycmF5LmlzQXJyYXkoY291cnNlc1Jlcy5kYXRhKSA/IGNvdXJzZXNSZXMuZGF0YSA6IFtdO1xuXG4gICAgICAgICAgICAvLyBHZXQgUHJvZ3Jlc3MgZm9yIGVhY2ggY291cnNlXG4gICAgICAgICAgICAvLyBMRCBBUEk6IC9sZGxtcy92Mi91c2Vycy1jb3Vyc2UtcHJvZ3Jlc3NfdjI/dXNlcj08aWQ+JmNvdXJzZT08Y291cnNlX2lkPlxuICAgICAgICAgICAgLy8gVGhpcyBpcyBoZWF2eS4gTGV0J3MgbGltaXQgY29uY3VycmVuY3kgb3IgY2hlY2sgaWYgd2UgY2FuIGdldCBhbGwgYXQgb25jZS5cbiAgICAgICAgICAgIC8vIERvY3VtZW50YXRpb24gaW1wbGllcyBvbmUgYnkgb25lLlxuXG4gICAgICAgICAgICBjb25zdCBjb3Vyc2VzV2l0aFByb2dyZXNzID0gYXdhaXQgUHJvbWlzZS5hbGwoY291cnNlc0RhdGEubWFwKGFzeW5jIChjb3Vyc2UpID0+IHtcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9ncmVzc1JlcyA9IGF3YWl0IHdwQ2xpZW50LmdldChgL2xkbG1zL3YyL3VzZXJzLWNvdXJzZS1wcm9ncmVzc192Mj91c2VyPSR7aWR9JmNvdXJzZT0ke2NvdXJzZS5pZH1gLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lb3V0OiAyMDAwLCAvLyBTaG9ydCB0aW1lb3V0XG4gICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzOiB7IEF1dGhvcml6YXRpb246IGdldExkQXV0aEhlYWRlcigpIH1cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSGVscGVyIHRvIGNhbGN1bGF0ZSBwZXJjZW50YWdlLlxuICAgICAgICAgICAgICAgICAgICAvLyBTdHJ1Y3R1cmUgZGVwZW5kcyBvbiBMRCB2ZXJzaW9uLiBPZnRlbiBoYXMgJ3N0ZXBzX2NvbXBsZXRlZCcsICdzdGVwc190b3RhbCcuXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBEYXRhID0gcHJvZ3Jlc3NSZXMuZGF0YTtcbiAgICAgICAgICAgICAgICAgICAgbGV0IHByb2dyZXNzUGVyY2VudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIC8vIEhldXJpc3RpYyBmb3IgcHJvZ3Jlc3NcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBEYXRhLmNvdXJzZV9wcm9ncmVzcyAmJiBwRGF0YS5jb3Vyc2VfcHJvZ3Jlc3MudG90YWxfc3RlcHMgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9ncmVzc1BlcmNlbnQgPSAocERhdGEuY291cnNlX3Byb2dyZXNzLmNvbXBsZXRlZF9zdGVwcyAvIHBEYXRhLmNvdXJzZV9wcm9ncmVzcy50b3RhbF9zdGVwcykgKiAxMDA7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvdXJzZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBjb3Vyc2UudGl0bGUgJiYgY291cnNlLnRpdGxlLnJlbmRlcmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IE1hdGgucm91bmQocHJvZ3Jlc3NQZXJjZW50KVxuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IGNvdXJzZS5pZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBjb3Vyc2UudGl0bGUgJiYgY291cnNlLnRpdGxlLnJlbmRlcmVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvZ3Jlc3M6IG51bGwsXG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvcjogJ1Byb2dyZXNzIHVuYXZhaWxhYmxlJ1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pKTtcblxuICAgICAgICAgICAgZGFzaGJvYXJkLmNvdXJzZXMgPSBjb3Vyc2VzV2l0aFByb2dyZXNzO1xuXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdMZWFybkRhc2ggQ2lyY3VpdCBCcmVha2VyOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgICAgICAgICAgZGFzaGJvYXJkLndhcm5pbmdzLnB1c2goJ0N1cnNvcyBpbmRpc3BvbsOtdmVpcyB0ZW1wb3JhcmlhbWVudGUnKTtcbiAgICAgICAgICAgIC8vIFdlIHN0aWxsIHJldHVybiB1c2VyIGRhdGFcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhY2hlIHRoZSByZXN1bHRcbiAgICAgICAgYXdhaXQgcmVkaXMuc2V0KGNhY2hlS2V5LCBKU09OLnN0cmluZ2lmeShkYXNoYm9hcmQpLCAnRVgnLCBDQUNIRV9UVEwpO1xuXG4gICAgICAgIHJldHVybiBkYXNoYm9hcmQ7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgaWYgKGVycm9yLnJlc3BvbnNlICYmIGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDA0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1VzZXIgbm90IGZvdW5kJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gICAgZ2V0VXNlckRhc2hib2FyZFxufTtcbiJdLCJtYXBwaW5ncyI6IkFBQUEsTUFBTUEsS0FBSyxHQUFHQyxPQUFPLENBQUMsU0FBUyxDQUFDO0FBQ2hDLE1BQU07RUFBRUMsUUFBUTtFQUFFQztBQUFnQixDQUFDLEdBQUdGLE9BQU8sQ0FBQyxRQUFRLENBQUM7QUFFdkQsTUFBTUcsU0FBUyxHQUFHLEdBQUcsQ0FBQyxDQUFDOztBQUV2QixNQUFNQyxnQkFBZ0IsR0FBRyxNQUFPQyxFQUFFLElBQUs7RUFDbkMsTUFBTUMsUUFBUSxHQUFHLDRCQUE0QkQsRUFBRSxZQUFZO0VBQzNELE1BQU1FLEtBQUssR0FBR1IsS0FBSyxDQUFDUyxTQUFTLENBQUMsQ0FBQztFQUUvQixNQUFNQyxNQUFNLEdBQUcsTUFBTUYsS0FBSyxDQUFDRyxHQUFHLENBQUNKLFFBQVEsQ0FBQztFQUN4QyxJQUFJRyxNQUFNLEVBQUU7SUFDUixPQUFPRSxJQUFJLENBQUNDLEtBQUssQ0FBQ0gsTUFBTSxDQUFDO0VBQzdCO0VBRUEsSUFBSTtJQUNBO0lBQ0E7SUFDQSxNQUFNSSxPQUFPLEdBQUcsTUFBTVosUUFBUSxDQUFDUyxHQUFHLENBQUMsZ0JBQWdCTCxFQUFFLEVBQUUsRUFBRTtN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